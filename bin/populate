#!/bin/bash

echo "Populating database"
chmod +x scripts/pre_setup
scripts/pre_setup

docker run \
  --rm \
  -d \
  --name=rebase-challenge \
  -w /app \
  -v $(pwd):/app \
  --network=rebase-network \
  -p 3000:3000 \
  ruby \
  bash -c "sh scripts/install_gems && RACK_ENV=development bundle exec rake db:reset"

docker container rm -f rebase-challenge

echo "Done"